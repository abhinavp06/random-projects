CREATE TABLE user_data (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  age INTEGER NOT NULL CHECK (age >= 0),
  email VARCHAR(255) NOT NULL UNIQUE,
  mobile VARCHAR(10) NOT NULL,
  organization VARCHAR(255),
  joining_date DATE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE NOT NULL
)

CREATE TABLE campaigns (
    id UUID PRIMARY KEY,
    name TEXT,
    cron VARCHAR(100) NOT NULL,
    filter TEXT NOT NULL,
    enabled BOOLEAN NOT NULL DEFAULT TRUE,
    last_run TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_campaigns_updated_at
    BEFORE UPDATE ON campaigns
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at_column();

INSERT INTO campaigns (id, name, cron, filter, enabled, last_run, created_at, updated_at)
VALUES
    ('123e4567-e89b-12d3-a456-426614174000', 'Welcome Campaign', '* * * * *', 'age > 18', TRUE, '2025-10-22 10:30:00+00', '2025-10-01 12:00:00+00', '2025-10-22 10:30:00+00'),
    ('123e4567-e89b-12d3-a456-426614174001', 'US Promotion', '*/2 * * * *', 'email LIKE ''%@gmail.com''', TRUE, NULL, '2025-10-01 12:00:00+00', '2025-10-01 12:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174002', 'Premium Offer', '0 0 * * *', 'organization = ''Shields LLC''', FALSE, '2025-10-15 00:00:00+00', '2025-09-15 09:00:00+00', '2025-10-15 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174003', 'EU Discount', '0 * * * *', 'joining_date > ''2025-01-01''', TRUE, '2025-10-22 09:00:00+00', '2025-10-01 12:00:00+00', '2025-10-22 09:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174004', 'Active Users', '*/5 * * * *', 'created_at > ''2025-10-01 00:00:00+00''', TRUE, NULL, '2025-10-10 15:00:00+00', '2025-10-10 15:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174005', 'New User Onboarding', '0 12 * * *', 'joining_date > ''2025-10-01''', TRUE, '2025-10-22 12:00:00+00', '2025-09-20 08:00:00+00', '2025-10-22 12:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174006', 'UK Special', '*/10 * * * *', 'mobile LIKE ''447%''', TRUE, NULL, '2025-10-05 10:00:00+00', '2025-10-05 10:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174007', 'Loyalty Program', '0 0 * * 1', 'age BETWEEN 30 AND 50', FALSE, '2025-10-20 00:00:00+00', '2025-09-10 14:00:00+00', '2025-10-20 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174008', 'Asia Campaign', '0 8 * * *', 'organization IN (''White LLC'', ''Stehr - Torp'')', TRUE, '2025-10-22 08:00:00+00', '2025-10-01 09:00:00+00', '2025-10-22 08:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174009', 'Free Trial Reminder', '0 0 * * 0', 'created_at < ''2025-10-15 00:00:00+00''', TRUE, NULL, '2025-10-15 12:00:00+00', '2025-10-15 12:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174010', 'High Value Users', '0 6 * * *', 'id > 1000', TRUE, '2025-10-22 06:00:00+00', '2025-09-25 11:00:00+00', '2025-10-22 06:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174011', 'Canada Promotion', '*/15 * * * *', 'email LIKE ''%@yahoo.ca''', TRUE, NULL, '2025-10-03 13:00:00+00', '2025-10-03 13:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174012', 'Weekend Special', '0 10 * * 6,0', 'joining_date > ''2025-09-01''', FALSE, '2025-10-19 10:00:00+00', '2025-09-01 08:00:00+00', '2025-10-19 10:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174013', 'Young Adults', '0 14 * * *', 'age BETWEEN 18 AND 25', TRUE, '2025-10-22 14:00:00+00', '2025-10-01 10:00:00+00', '2025-10-22 14:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174014', 'Referral Program', '0 0 1 * *', 'name LIKE ''John%''', TRUE, NULL, '2025-10-01 00:00:00+00', '2025-10-01 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174015', 'Australia Campaign', '0 7 * * *', 'mobile LIKE ''614%''', TRUE, '2025-10-22 07:00:00+00', '2025-09-30 09:00:00+00', '2025-10-22 07:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174016', 'VIP Discount', '0 0 * * 2', 'organization = ''Yundt Inc''', FALSE, '2025-10-21 00:00:00+00', '2025-09-05 12:00:00+00', '2025-10-21 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174017', 'Mobile Users', '*/30 * * * *', 'mobile IS NOT NULL', TRUE, NULL, '2025-10-10 11:00:00+00', '2025-10-10 11:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174018', 'Holiday Sale', '0 0 25 12 *', 'joining_date > ''2025-06-01''', TRUE, NULL, '2025-09-15 14:00:00+00', '2025-09-15 14:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174019', 'Latin America Offer', '0 9 * * *', 'email LIKE ''%@hotmail.com''', TRUE, '2025-10-22 09:00:00+00', '2025-10-01 08:00:00+00', '2025-10-22 09:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174020', 'Engaged Users', '*/5 * * * *', 'created_at > ''2025-10-05 00:00:00+00''', TRUE, '2025-10-22 10:35:00+00', '2025-10-05 10:00:00+00', '2025-10-22 10:35:00+00'),
    ('123e4567-e89b-12d3-a456-426614174021', 'Churn Prevention', '0 0 * * 1', 'joining_date < ''2025-09-01''', FALSE, '2025-10-20 00:00:00+00', '2025-09-01 12:00:00+00', '2025-10-20 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174022', 'Students Campaign', '0 15 * * *', 'organization IN (''Howe LLC'', ''Baumbach Inc'')', TRUE, NULL, '2025-10-12 09:00:00+00', '2025-10-12 09:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174023', 'Black Friday Prep', '0 0 1 11 *', 'age > 25', TRUE, NULL, '2025-10-01 14:00:00+00', '2025-10-01 14:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174024', 'High Spenders', '0 8 * * 1', 'id > 5000', TRUE, '2025-10-20 08:00:00+00', '2025-09-20 10:00:00+00', '2025-10-20 08:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174025', 'Email Opt-in', '0 10 * * *', 'email IS NOT NULL', TRUE, '2025-10-22 10:00:00+00', '2025-10-01 11:00:00+00', '2025-10-22 10:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174026', 'New Year Campaign', '0 0 1 1 *', 'joining_date > ''2025-01-01''', FALSE, NULL, '2025-09-10 12:00:00+00', '2025-09-10 12:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174027', 'Frequent Buyers', '0 0 * * 0', 'created_at > ''2025-09-15 00:00:00+00''', TRUE, '2025-10-19 00:00:00+00', '2025-09-15 09:00:00+00', '2025-10-19 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174028', 'Social Media Users', '*/20 * * * *', 'email LIKE ''%@outlook.com''', TRUE, NULL, '2025-10-08 10:00:00+00', '2025-10-08 10:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174029', 'Trial Users', '0 0 * * *', 'joining_date > ''2025-10-01''', TRUE, '2025-10-22 00:00:00+00', '2025-10-01 12:00:00+00', '2025-10-22 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174030', 'Asia-Pacific Offer', '0 6 * * *', 'mobile LIKE ''65%''', TRUE, '2025-10-22 06:00:00+00', '2025-10-01 08:00:00+00', '2025-10-22 06:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174031', 'Returning Users', '0 12 * * 0', 'created_at > ''2025-09-01 00:00:00+00''', TRUE, '2025-10-19 12:00:00+00', '2025-09-20 10:00:00+00', '2025-10-19 12:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174032', 'Low Engagement', '0 0 * * 3', 'joining_date < ''2025-08-01''', FALSE, '2025-10-15 00:00:00+00', '2025-09-01 14:00:00+00', '2025-10-15 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174033', 'Premium Trial', '0 9 * * *', 'created_at > ''2025-10-01 00:00:00+00''', TRUE, '2025-10-22 09:00:00+00', '2025-10-01 10:00:00+00', '2025-10-22 09:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174034', 'Global Campaign', '0 0 * * *', 'id IS NOT NULL', TRUE, '2025-10-22 00:00:00+00', '2025-09-25 12:00:00+00', '2025-10-22 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174035', 'Feedback Campaign', '0 0 15 * *', 'name LIKE ''%Smith%''', TRUE, NULL, '2025-10-10 09:00:00+00', '2025-10-10 09:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174036', 'Corporate Users', '0 8 * * 1-5', 'organization = ''Graham LLC''', TRUE, '2025-10-21 08:00:00+00', '2025-09-15 10:00:00+00', '2025-10-21 08:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174037', 'Early Adopters', '0 0 1 * *', 'joining_date < ''2024-01-01''', FALSE, NULL, '2025-09-01 12:00:00+00', '2025-09-01 12:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174038', 'Mobile App Users', '*/10 * * * *', 'mobile IS NOT NULL', TRUE, '2025-10-22 10:40:00+00', '2025-10-05 09:00:00+00', '2025-10-22 10:40:00+00'),
    ('123e4567-e89b-12d3-a456-426614174039', 'Holiday Reminder', '0 0 20 12 *', 'joining_date > ''2025-01-01''', TRUE, NULL, '2025-10-01 14:00:00+00', '2025-10-01 14:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174040', 'EU Students', '0 15 * * *', 'organization IN (''Kiehn LLC'', ''Lakin Inc'') AND age < 25', TRUE, '2025-10-22 15:00:00+00', '2025-10-01 10:00:00+00', '2025-10-22 15:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174041', 'High Activity', '*/5 * * * *', 'created_at > ''2025-10-10 00:00:00+00''', TRUE, '2025-10-22 10:35:00+00', '2025-10-05 12:00:00+00', '2025-10-22 10:35:00+00'),
    ('123e4567-e89b-12d3-a456-426614174042', 'Lapsed Users', '0 0 * * 0', 'joining_date < ''2025-08-01''', FALSE, '2025-10-19 00:00:00+00', '2025-09-01 12:00:00+00', '2025-10-19 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174043', 'Newsletter Signup', '0 10 * * *', 'email IS NOT NULL', TRUE, '2025-10-22 10:00:00+00', '2025-10-01 09:00:00+00', '2025-10-22 10:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174044', 'VIP Onboarding', '0 12 * * *', 'organization = ''Hahn Group'' AND joining_date > ''2025-09-01''', TRUE, NULL, '2025-10-10 12:00:00+00', '2025-10-10 12:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174045', 'Global Trial', '0 0 * * *', 'created_at > ''2025-10-01 00:00:00+00''', TRUE, '2025-10-22 00:00:00+00', '2025-10-01 12:00:00+00', '2025-10-22 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174046', 'Feedback Follow-up', '0 0 10 * *', 'name LIKE ''%Jane%''', TRUE, NULL, '2025-10-10 09:00:00+00', '2025-10-10 09:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174047', 'Premium Renewal', '0 0 * * *', 'joining_date > ''2025-10-01''', TRUE, '2025-10-22 00:00:00+00', '2025-10-01 10:00:00+00', '2025-10-22 00:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174048', 'US Students', '0 14 * * *', 'organization IN (''Graham LLC'', ''Kiehn LLC'') AND age < 22', TRUE, '2025-10-22 14:00:00+00', '2025-10-01 12:00:00+00', '2025-10-22 14:00:00+00'),
    ('123e4567-e89b-12d3-a456-426614174049', 'End of Year Sale', '0 0 30 12 *', 'id > 100', TRUE, NULL, '2025-10-01 14:00:00+00', '2025-10-01 14:00:00+00');